---
title: '[原]51nod 1416两点DFS'
tags: []
date: 2016-11-01 21:25:29
---

## 题目网址

[http://www.51nod.com/onlineJudge/questionCode.html#!problemId=1416](http://www.51nod.com/onlineJudge/questionCode.html#!problemId=1416)

简单的深搜

## 直接上代码

    <span class="hljs-preprocessor">#include&lt;iostream&gt;</span>
    <span class="hljs-preprocessor">#include&lt;cstring&gt;</span>
    <span class="hljs-preprocessor">#include&lt;cstdio&gt;</span>
    <span class="hljs-preprocessor">#include&lt;algorithm&gt;</span>

    <span class="hljs-preprocessor">#define ll long long  </span>
    <span class="hljs-preprocessor">#define DEBUG print</span>
    <span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;

    <span class="hljs-keyword">bool</span> hash[<span class="hljs-number">51</span>][<span class="hljs-number">51</span>];
    <span class="hljs-keyword">char</span> tu[<span class="hljs-number">55</span>][<span class="hljs-number">55</span>];
    <span class="hljs-keyword">int</span> path[<span class="hljs-number">55</span>][<span class="hljs-number">55</span>];
    <span class="hljs-keyword">bool</span> dfs(<span class="hljs-keyword">int</span> n,<span class="hljs-keyword">int</span> m,<span class="hljs-keyword">int</span> i,<span class="hljs-keyword">int</span> j,<span class="hljs-keyword">int</span> count,<span class="hljs-keyword">char</span> c)
    {
    <span class="hljs-comment">//  DEBUG("%c %d %d\n",c,i,j);</span>
        hash[i][j]=<span class="hljs-number">0</span>;
        path[i][j]=count;
        <span class="hljs-keyword">if</span>(j+<span class="hljs-number">1</span>&lt;m&amp;&amp;tu[i][j+<span class="hljs-number">1</span>]==c){
            <span class="hljs-keyword">if</span>(path[i][j+<span class="hljs-number">1</span>]&lt;<span class="hljs-number">0</span>){
                <span class="hljs-keyword">if</span>(dfs(n,m,i,j+<span class="hljs-number">1</span>,count+<span class="hljs-number">1</span>,c))<span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
            }
            <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">if</span>(path[i][j]-path[i][j+<span class="hljs-number">1</span>]&gt;=<span class="hljs-number">3</span>)<span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
            } 
        }
        <span class="hljs-keyword">if</span>(i+<span class="hljs-number">1</span>&lt;n&amp;&amp;tu[i+<span class="hljs-number">1</span>][j]==c){
            <span class="hljs-keyword">if</span>(path[i+<span class="hljs-number">1</span>][j]&lt;<span class="hljs-number">0</span>){
                <span class="hljs-keyword">if</span>(dfs(n,m,i+<span class="hljs-number">1</span>,j,count+<span class="hljs-number">1</span>,c))<span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
            }
            <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">if</span>(path[i][j]-path[i+<span class="hljs-number">1</span>][j]&gt;=<span class="hljs-number">3</span>)<span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
            } 
        }
        <span class="hljs-keyword">if</span>(j-<span class="hljs-number">1</span>&gt;=<span class="hljs-number">0</span>&amp;&amp;tu[i][j-<span class="hljs-number">1</span>]==c){
            <span class="hljs-keyword">if</span>(path[i][j-<span class="hljs-number">1</span>]&lt;<span class="hljs-number">0</span>){
                <span class="hljs-keyword">if</span>(dfs(n,m,i,j-<span class="hljs-number">1</span>,count+<span class="hljs-number">1</span>,c))<span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
            }
            <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">if</span>(path[i][j]-path[i][j-<span class="hljs-number">1</span>]&gt;=<span class="hljs-number">3</span>)<span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
            } 
        }
        <span class="hljs-keyword">if</span>(i-<span class="hljs-number">1</span>&gt;=<span class="hljs-number">0</span>&amp;&amp;tu[i-<span class="hljs-number">1</span>][j]==c){
            <span class="hljs-keyword">if</span>(path[i-<span class="hljs-number">1</span>][j]&lt;<span class="hljs-number">0</span>){
                <span class="hljs-keyword">if</span>(dfs(n,m,i-<span class="hljs-number">1</span>,j,count+<span class="hljs-number">1</span>,c))<span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
            }
            <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">if</span>(path[i][j]-path[i-<span class="hljs-number">1</span>][j]&gt;=<span class="hljs-number">3</span>)<span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
            } 
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }
    <span class="hljs-keyword">int</span> main()
    {
    <span class="hljs-comment">//  memset(hash,1,sizeof(hash));</span>

        <span class="hljs-built_in">memset</span>(tu,<span class="hljs-number">0</span>,<span class="hljs-keyword">sizeof</span>(tu));
    <span class="hljs-comment">//  memset(path,-1,sizeof(path));</span>
        <span class="hljs-keyword">int</span> n,m;
        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d"</span>,&amp;n,&amp;m);
        getchar();
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++){
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>;j&lt;m;j++){
                hash[i][j]=<span class="hljs-number">1</span>;
            }
        }
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++){
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>;j&lt;m;j++){
                path[i][j]=-<span class="hljs-number">1</span>;
            }
        }
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++){
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>;j&lt;m;j++){
                <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%c"</span>,&amp;tu[i][j]);
            }
            getchar();
        }
        <span class="hljs-keyword">bool</span> ansflag=<span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++){
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>;j&lt;m;j++){
                <span class="hljs-keyword">if</span>(!hash[i][j])<span class="hljs-keyword">continue</span>;
                <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">if</span>(dfs(n,m,i,j,<span class="hljs-number">0</span>,tu[i][j])){
                        ansflag=<span class="hljs-number">1</span>;
                        <span class="hljs-keyword">break</span>;
                    }
                }
            }
            <span class="hljs-keyword">if</span>(ansflag)<span class="hljs-keyword">break</span>;
        }

        <span class="hljs-keyword">if</span>(ansflag)<span class="hljs-built_in">printf</span>(<span class="hljs-string">"Yes\n"</span>);
        <span class="hljs-keyword">else</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">"No\n"</span>);
     } 

            <div>
                作者：qq_27803491 发表于2016/11/1 21:25:29 [原文链接](http://blog.csdn.net/qq_27803491/article/details/53000918)
            </div>
            <div>
            阅读：49 评论：0 [查看评论](http://blog.csdn.net/qq_27803491/article/details/53000918#comments)
            </div>