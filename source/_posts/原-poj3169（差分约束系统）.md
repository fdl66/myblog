---
title: '[原]poj3169（差分约束系统）'
tags: []
date: 2016-11-08 12:24:18
---

## 题目

1.  网址：[http://poj.org/problem?id=3169](http://poj.org/problem?id=3169)
2.  大概题意：有N个点，其中有ml个限制条件：点a，点b，的最长距离为d，有md个限制条件，点a,点b，的最短距离为d；点按序号顺序排，求第一个点到最后一个点的最长距离。
3.  解题思路：差分约束，其实我也不太清楚什么是差分约束，大概就是将各种限制条件，逐个加入，先假设N个点间的距离都为无穷大，然后，按下列顺序，（循环）N（N，ml，md），依次加入限制条件，就可以了，加入第一种限制时，点b的原距离与a点距离加上d，比较，取最小值为b点的最新距离,,min(b(原)，a+d)。加入第二种限制时，已知b求a，min（a（原），b-d）;

## 代码

    <span class="hljs-preprocessor">#include&lt;iostream&gt;</span>
    <span class="hljs-preprocessor">#include&lt;cstdio&gt;</span>
    <span class="hljs-preprocessor">#include&lt;string&gt;</span>
    <span class="hljs-preprocessor">#include&lt;cstring&gt;</span>
    <span class="hljs-preprocessor">#include&lt;cmath&gt;</span>
    <span class="hljs-preprocessor">#include&lt;algorithm&gt;</span>
    <span class="hljs-preprocessor">#define INF 0x3f3f3f3f</span>
    <span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;
    <span class="hljs-keyword">int</span> d[<span class="hljs-number">1010</span>];
    <span class="hljs-keyword">struct</span> MLD{
        <span class="hljs-keyword">int</span> a,b,d;
    }ML[<span class="hljs-number">10010</span>];
    <span class="hljs-keyword">struct</span> MDD{
        <span class="hljs-keyword">int</span> a,b,d;
    }MD[<span class="hljs-number">10010</span>];

    <span class="hljs-keyword">int</span> main()
    {
        <span class="hljs-built_in">memset</span>(d,INF,<span class="hljs-keyword">sizeof</span>(d));
        <span class="hljs-built_in">memset</span>(ML,<span class="hljs-number">0</span>,<span class="hljs-keyword">sizeof</span>(ML));
        <span class="hljs-built_in">memset</span>(MD,<span class="hljs-number">0</span>,<span class="hljs-keyword">sizeof</span>(MD));
        <span class="hljs-keyword">int</span> n,ml,md;
        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d%d"</span>,&amp;n,&amp;ml,&amp;md);
        d[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;ml;i++){
            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d%d"</span>,&amp;ML[i].a,&amp;ML[i].b,&amp;ML[i].d);
        }
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;md;i++){
            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">"%d%d%d"</span>,&amp;MD[i].a,&amp;MD[i].b,&amp;MD[i].d);
        }
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++){
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>;j&lt;n;j++){
                <span class="hljs-keyword">if</span>(d[j+<span class="hljs-number">1</span>]&lt;INF)d[j]=min(d[j],d[j+<span class="hljs-number">1</span>]);
            }
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>;j&lt;ml;j++){
                <span class="hljs-keyword">if</span>(d[ML[j].a-<span class="hljs-number">1</span>]&lt;INF){
                    d[ML[j].b-<span class="hljs-number">1</span>]=min(d[ML[j].a-<span class="hljs-number">1</span>]+ML[j].d,d[ML[j].b-<span class="hljs-number">1</span>]);
                }
            }
            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>;j&lt;md;j++){
                <span class="hljs-keyword">if</span>(d[MD[j].b-<span class="hljs-number">1</span>]&lt;INF){
                    d[MD[j].a-<span class="hljs-number">1</span>]=min(d[MD[j].b-<span class="hljs-number">1</span>]-MD[j].d,d[MD[j].a-<span class="hljs-number">1</span>]);
                }
            }
        }
        <span class="hljs-keyword">if</span>(d[<span class="hljs-number">0</span>]&lt;<span class="hljs-number">0</span>)<span class="hljs-built_in">printf</span>(<span class="hljs-string">"-1\n"</span>);
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(d[n-<span class="hljs-number">1</span>]==INF)<span class="hljs-built_in">printf</span>(<span class="hljs-string">"-2\n"</span>);
        <span class="hljs-keyword">else</span> {
            <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>,d[n-<span class="hljs-number">1</span>]);
        }

        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }

            <div>
                作者：qq_27803491 发表于2016/11/8 12:24:18 [原文链接](http://blog.csdn.net/qq_27803491/article/details/53080973)
            </div>
            <div>
            阅读：61 评论：0 [查看评论](http://blog.csdn.net/qq_27803491/article/details/53080973#comments)
            </div>